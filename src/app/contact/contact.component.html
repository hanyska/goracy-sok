<div id="contact" class="animated fadeIn">
  <header class="contact-header clearfix">
    <div class="container narrow text-center">
      <div class="col-12">
        <h3 class="heading">Prześlij przepis!</h3>
        <div class="heading-underline"></div>
      </div>
    </div>
  </header>


  <div class="container clearfix">
    <div class="contact-container container clearfix">
      <div class="row">
        <div class="col-md-8 form-container">
          <h5>Pokaż nam swoją wersję gorącego soku pomarańczowego!</h5>

          <form [formGroup]="recipeForm" (ngSubmit)="onSubmit(recipeForm.value)">
            <div class="row">
              <div class="col-md-6 col-sm-12">
                <div class="form-group has-float-label">
                  <input
                    class="form-control"
                    type="text"
                    id="username"
                    placeholder="Anna"
                    formControlName="username"
                  />
                  <label for="username" *ngIf="!(recipeForm.get('username').invalid && recipeForm.get('username').touched); else error">Twoje imie *</label>
                  <ng-template #error><label for="username" class="error">Pole nie może być puste!</label></ng-template>
                </div>
              </div>

              <div class="col-md-6 col-sm-12">
                <div class="form-group has-float-label">
                  <input
                    class="form-control"
                    type="text"
                    id="email"
                    placeholder="anna@gmail.com"
                    formControlName="email"/>
                  <label for="email"> Adres e-mail * </label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 col-sm-12">
                <div class="form-group has-float-label">
                  <input
                    class="form-control"
                    type="text"
                    id="namerecipe"
                    placeholder="Gorący sok z imbirem"
                    formControlName="nameRecipe"/>
                  <label for="namerecipe">Nazwa przepisu * </label>
                </div>
              </div>

              <div class="col-md-6 col-sm-12">
                <div class="form-group has-float-label">
                  <input type="file"
                         formControlName="imageUrl"
                         (change)="showPreview($event)"
                          accept=".png,.jpg">
                </div>
              </div>
            </div>

            <div formArrayName="ingredients">
              <div class="row" *ngFor="let ingredient of getControls(); let i = index" [formGroupName]="i">

                <div class="col-md-6 col-sm-6">
                  <div class="form-group has-float-label">
                    <input class="form-control" type="text"  id="name" placeholder="Sok pomarańczowy"
                           formControlName="name">
                    <label for="name">Składniki</label>
                  </div>
                </div>

                <div class="col-md-2 col-sm-2">
                    <div class="form-group has-float-label">
                      <label>
                      <input class="form-control" type="number" min="1" formControlName="amount" id="amount" placeholder="1">
                        Ilość</label>
                    </div>

                </div>

                <div class="col-md-2 col-sm-2">
                  <label class="form-group has-float-label">
                    <select class="custom-select-lg" formControlName="measure" id="measure" style="cursor: pointer" required>
                      <option *ngFor="let m of measures" [value]="m">{{m}}</option>
                    </select>
                  </label>
                </div>

                <div class="col-md-1 col-sm-1 mt-2 p-1">
                  <button type="button" class="btn btn-sm btn-block btn-danger" [disabled]="i === 0"
                          (click)="onDeleteIngredient(i)"><i class="fas fa-minus"></i>
                  </button>
                </div>

                <div class="col-md-1 col-sm-1 mt-2 p-1">
                  <button type="button" class="btn btn-sm btn-block btn-success" (click)="onAddIngredient()"><i
                    class="fas fa-check"></i></button>
                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-sm-12 textarea">
                <div class="form-group has-float-label">
                  <textarea
                    rows="4"
                    id="recipe"
                    placeholder="Sok pomarańczowy podgrzewamy ..."
                    formControlName="recipe">
                  </textarea>
                  <label for="recipe">Przepis</label>
                </div>
              </div>
            </div>


            <div class="row text-center display-2">
              <div class="col-sm-6 col-sm-pull-6 col-xs-12">
                <button type="button" class="btn btn-reset" (click)="onResetRecipe()">Wyczyść</button>
              </div>

              <div class="col-sm-6 col-sm-push-6 col-xs-12">
                <button type="submit" class="btn btn-main" [ngClass]="recipeForm.valid ? 'animated shake' : 'btn btn-main'" [disabled]="!recipeForm.valid" >Wyślij</button>
              </div>
            </div>

          </form>

          {{recipeForm.getRawValue() | json}}
        </div>

        <div class="col-md-4 sidebar">
          <h4 class="p-4">Szczegóły kontaktu</h4>
          <div class="detail" style="display: inline-block;">
            <i class="fas fa-map-marker-alt fa-2x"></i>
            <p>33-300 Nowy Sącz</p>
          </div>
          <div class="detail">
            <i class="fas fa-phone fa-2x"></i>
            <p> (+48) 508 - 805 - 710 </p></div>

          <div class="detail">
            <i class="fas fa-envelope fa-2x"></i>
            <p>goracysokpomaranczowy.gmail.com</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
